<div class="form-editor-container">
  <!-- Header -->
  <header class="editor-header">
    <div class="header-content">
      <div class="header-left">
        <button class="btn-back" (click)="goBack()">â† Retour</button>
        <h1>{{ isEditMode ? 'Modifier' : 'CrÃ©er' }} un formulaire</h1>
      </div>

      <div class="header-actions">
        <button class="btn-preview" (click)="togglePreview()" [disabled]="saving">
          {{ showPreview ? 'âœï¸ Ã‰diter' : 'ğŸ‘ï¸ AperÃ§u' }}
        </button>

        <button class="btn-save" (click)="saveDraft()" [disabled]="saving">
          {{ saving ? 'Enregistrement...' : 'ğŸ’¾ Enregistrer' }}
        </button>

        <button class="btn-publish" (click)="saveAndPublish()" [disabled]="saving">
          âœ… Publier
        </button>
      </div>
    </div>
  </header>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-overlay">
    <div class="spinner"></div>
    <p>Chargement...</p>
  </div>

  <!-- Editor Mode -->
  <div *ngIf="!loading && !showPreview" class="editor-mode">
    <div class="editor-sidebar">
      <h3>ğŸ’¡ Types de questions</h3>
      <p class="sidebar-help">Cliquez pour insÃ©rer un template</p>

      <button class="template-btn" (click)="insertTemplate('text')">ğŸ“ Texte court</button>
      <button class="template-btn" (click)="insertTemplate('comment')">ğŸ“„ Texte long</button>
      <button class="template-btn" (click)="insertTemplate('dropdown')">ğŸ“‹ Liste dÃ©roulante</button>
      <button class="template-btn" (click)="insertTemplate('checkbox')">â˜‘ï¸ Cases Ã  cocher</button>
      <button class="template-btn" (click)="insertTemplate('radiogroup')">ğŸ”˜ Choix unique</button>
      <button class="template-btn" (click)="insertTemplate('rating')">â­ Notation</button>
      <button class="template-btn" (click)="insertTemplate('boolean')">âœ”ï¸ Oui/Non</button>
      <button class="template-btn" (click)="insertTemplate('file')">Fichier</button>

      <div class="help-section">
        <h4>ğŸ“š Documentation</h4>
        https://surveyjs.io/form-library/documentation/api-reference/survey-data-model
      </div>
    </div>

    <div class="editor-main">
      <div class="editor-header-info">
        <h2>Ã‰diteur JSON</h2>
        <p>Modifiez le JSON pour crÃ©er votre formulaire</p>
      </div>

      <div *ngIf="jsonError" class="error-message">
        âš ï¸ {{ jsonError }}
      </div>

      <textarea
        id="jsonEditor"
        [(ngModel)]="jsonSchema"
        (ngModelChange)="validateJSON()"
        class="json-editor"
        spellcheck="false"
        rows="20"
      ></textarea>

      <div class="editor-info">
        <p>
          <strong>ğŸ’¡ Astuce :</strong> Utilisez les boutons Ã  gauche pour insÃ©rer des templates de questions.
        </p>
      </div>
    </div>
  </div>

  <!-- Preview Mode -->
  <div *ngIf="!loading && showPreview" class="preview-mode">
  <div class="preview-header">
    <h2>AperÃ§u du formulaire</h2>
    <p>Voici comment les utilisateurs verront votre formulaire</p>
  </div>

  <div class="preview-container">
    <survey *ngIf="previewSurvey" [model]="previewSurvey"></survey>
  </div>
</div>

</div>

